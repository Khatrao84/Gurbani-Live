<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My TV App</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body { margin:0; background:black; color:white; font-family:sans-serif; }
    #player { width:100vw; height:90vh; background:#000; display:flex; justify-content:center; align-items:center; }
    iframe, video { width:100%; height:100%; border:0; }
    #channels { height:10vh; overflow-x:auto; white-space:nowrap; background:#111; padding:10px; }
    button { background:#333; color:white; border:none; padding:10px 20px; margin:0 5px; cursor:pointer; border-radius:8px; }
    button:hover { background:#555; }
  </style>
</head>
<body>
  <div id="player"></div>
  <div id="channels"></div>

  <script>
    const channels = [
      { name: "1. Zee Punjab Haryana", url: "https://www.youtube.com/embed/live_stream?channel=CHANNEL_ID1&autoplay=1", type: "yt" },
      { name: "2. Fatehgarh Sahib", url: "/api/getLive?channel=CHANNEL_ID2", type: "yt-proxy" },
      { name: "3. PTC News", url: "https://www.youtube.com/embed/live_stream?channel=CHANNEL_ID3&autoplay=1", type: "yt" },
      { name: "4. Chardikla Time TV", url: "/api/getLive?channel=CHANNEL_ID5", type: "yt-proxy" },
      { name: "5. ABP Sanjha", url: "https://www.youtube.com/embed/live_stream?channel=CHANNEL_ID4&autoplay=1", type: "yt" },
      { name: "6. DD Punjabi", url: "/dd_punjabi.m3u8", type: "iptv" }
    ];

    const player = document.getElementById("player");
    const channelsDiv = document.getElementById("channels");

    function loadChannel(ch) {
      player.innerHTML = "";
      if (ch.type === "yt") {
        const iframe = document.createElement("iframe");
        iframe.src = ch.url;
        iframe.allow = "autoplay; encrypted-media";
        player.appendChild(iframe);
      } else if (ch.type === "yt-proxy") {
        fetch(ch.url).then(res => res.json()).then(data => {
          const iframe = document.createElement("iframe");
          iframe.src = data.url;
          iframe.allow = "autoplay; encrypted-media";
          player.appendChild(iframe);
        });
      } else if (ch.type === "iptv") {
        const video = document.createElement("video");
        video.controls = true;
        video.autoplay = true;
        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(ch.url);
          hls.attachMedia(video);
        } else {
          video.src = ch.url;
        }
        player.appendChild(video);
      }
    }

    channels.forEach((ch, i) => {
      const btn = document.createElement("button");
      btn.textContent = ch.name;
      btn.onclick = () => loadChannel(ch);
      channelsDiv.appendChild(btn);
    });

    // Load first channel by default
    loadChannel(channels[0]);
  </script>
</body>
</html>

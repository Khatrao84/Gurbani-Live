<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Live TV Channels</title>
  <link rel="icon" href="https://i.postimg.cc/FRDPFKpY/favicon-96x96.png" type="image/png">
  <style>
    html, body { margin:0; padding:0; height:100%; background:black; font-family:sans-serif; overflow:hidden; }
    #container { position:relative; width:100vw; height:100vh; }
    #stream { position:absolute; top:0; left:0; width:100%; height:100%; border:none; z-index:0; }
    #overlay { position:absolute; top:0; left:0; width:100%; height:100%; z-index:2; cursor:pointer; }
    #channelName { position:absolute; bottom:-60px; left:0; width:100%; background:rgba(0,0,0,0.7); color:white;
                   padding:12px 20px; font-size:22px; font-weight:bold; text-align:center; opacity:0; transition:all 0.6s ease; z-index:3; }
    #channelName.show { bottom:0; opacity:1; }
  </style>
</head>
<body>
  <div id="container">
    <iframe id="stream" allow="autoplay; fullscreen" allowfullscreen></iframe>
    <div id="overlay"></div>
    <div id="channelName"></div>
  </div>

  <script>
    const CHANNELS = [
      { name: "1. Patna Sahib LIVE", url: "https://www.youtube.com/embed/live_stream?channel=UC3nqw1kd4AK1q9e68YUoLDQ&autoplay=1", type: "yt" },
      { name: "2. Amritsar Sahib LIVE", url: "/api/getLive?channel=UCQLEbraENUGWh6p1Rv664rQ", type: "proxy" },
      { name: "3. Hazur Sahib LIVE", url: "https://www.youtube.com/embed/live_stream?channel=UCuerQ47I9Y2qxr4eIopxbYw&autoplay=1", type: "yt" },
      { name: "4. Chardikla Time TV", url: "/api/getLive?channel=UCudVHqnOekwcvpzNpY8_ERw", type: "proxy" },
      { name: "5. Fatehgarh Sahib LIVE", url: "https://www.youtube.com/embed/live_stream?channel=UCudVHqnOekwcvpzNpY8_ERw&autoplay=1", type: "yt" },
      { name: "6. DD Punjabi", url: ""/dd_punjabi.m3u8"", type: "iptv" }
    ];

    let currentChannel = 0;
    const IFRAME = document.getElementById('stream');
    const channelNameBox = document.getElementById('channelName');
    let hideTimeout;

    function loadChannel(index) {
      IFRAME.src = CHANNELS[index].url;
      showChannelName(CHANNELS[index].name);
    }

    function showChannelName(name) {
      channelNameBox.textContent = name;
      channelNameBox.classList.add("show");
      clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => channelNameBox.classList.remove("show"), 3000);
    }

    function nextChannel() { currentChannel = (currentChannel + 1) % CHANNELS.length; loadChannel(currentChannel); }
    function prevChannel() { currentChannel = (currentChannel - 1 + CHANNELS.length) % CHANNELS.length; loadChannel(currentChannel); }
    function jumpToChannel(index) { currentChannel = index; loadChannel(currentChannel); }

    document.getElementById('overlay').addEventListener('click', nextChannel);
    document.addEventListener('keydown', (e) => {
      if (e.key === "ArrowRight" || e.key.toLowerCase() === "d") nextChannel();
      else if (e.key === "ArrowLeft" || e.key.toLowerCase() === "a") prevChannel();
      else if (/^[1-6]$/.test(e.key)) jumpToChannel(parseInt(e.key)-1);
    });

    // Auto-refresh IPTV every 3 hours
    setInterval(() => {
      if (CHANNELS[currentChannel].type === "iptv") {
        loadChannel(currentChannel);
      }
    }, 3 * 60 * 60 * 1000);

    loadChannel(currentChannel);
  </script>
</body>
</html>
